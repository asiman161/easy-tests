<div>
  <h1>Профиль</h1>
  <div>{{user.last_name}} {{user.first_name}} {{user.patronymic}}</div>
  <div *ngIf="user.role === 2 || user.role === 3">
    <div>Ключ доступа: {{key}}</div>
    <button (click)="resetKey()">Обновить ключ</button>
  </div>
  <div><button (click)="editProfile()" *ngIf="user.role === 0 && !editingProfile">Заполнить профиль</button></div>
  <div *ngIf="editingProfile">
    <form [formGroup]="profileForm">
      <div class="form-group">
        <label>Фамилия*</label>
        <input type="text" class="form-control" formControlName="last_name">
        <small *ngIf="!profileForm.controls.last_name.valid">
          Фамилия обязательна
        </small>
      </div>
      <div class="form-group">
        <label>Имя*</label>
        <input type="text" class="form-control" formControlName="first_name">
        <small *ngIf="!profileForm.controls.first_name.valid">
          Имя обязательно
        </small>
      </div>
      <div class="form-group">
        <label>Отчество</label>
        <input type="text" class="form-control" formControlName="patronymic">
        <small *ngIf="!profileForm.controls.patronymic.valid">
          Присутствуют недопустимые символы
        </small>
      </div>
      <div class="form-group">
        <label><input type="radio" value="1" formControlName="user_role" (click)="setProfileForm(1)"><span>Студент</span></label><br>
        <label><input type="radio" value="2" formControlName="user_role" (click)="setProfileForm(2)"><span>Староста</span></label><br>
        <label><input type="radio" value="3" formControlName="user_role" (click)="setProfileForm(3)"><span>Преподаватель</span></label>
      </div>
      <div>
        <div *ngIf="profileForm.value.user_role === '1'">
          <label>Ключ группы*</label>
          <input type="text" class="form-control" formControlName="group_key">
          <small *ngIf="!profileForm.controls.group_key.valid">
            Необходимо указать ключ вашей группы
          </small>
        </div>
        <div *ngIf="profileForm.value.user_role === '2'">
          <div>
            <label>Имя группы*</label>
            <input type="text" class="form-control" formControlName="group_name">
            <small *ngIf="!profileForm.controls.group_name.valid">
              Необходимо создать имя вашей группы
            </small>
          </div>
          <div>
            <label>Курс</label>
            <input type="text" class="form-control" formControlName="group_age">
            <small *ngIf="!profileForm.controls.group_age.valid">
              не может быть больше 2 символов
            </small>
          </div>
        </div>
      </div>
      <div>
        <button (click)="saveProfile()">Сохранить</button>
      </div>
    </form>
  </div>
</div>
